"use strict";(self.webpackChunktask_control=self.webpackChunktask_control||[]).push([[662],{4662:(D,l,o)=>{o.r(l),o.d(l,{TasksModule:()=>_});var i=o(2997),m=o(8663);const u=(0,i.ZF)("tasks"),p=(0,i.P1)(u,e=>e.selectedTask);var t=o(4650),d=o(6895);const h=["commentText"];function x(e,s){1&e&&(t.TgZ(0,"p",14),t._uU(1," No comments yet... "),t.qZA())}function f(e,s){if(1&e){const n=t.EpF();t.TgZ(0,"p",15)(1,"span",16),t.NdJ("click",function(){const c=t.CHM(n).$implicit,U=t.oxw(2);return t.KtG(U.deleteComment(c._id))}),t._uU(2,"\u274c"),t.qZA(),t._uU(3),t.TgZ(4,"span"),t._uU(5),t.ALo(6,"date"),t.qZA()()}if(2&e){const n=s.$implicit;t.xp6(3),t.hij(" ",n.text," "),t.xp6(2),t.Oqu(t.xi3(6,2,n.created_at,"short"))}}function k(e,s){if(1&e){const n=t.EpF();t.TgZ(0,"div",1)(1,"h1"),t._uU(2),t.qZA(),t.TgZ(3,"div",2)(4,"div")(5,"h3"),t._uU(6,"Details"),t.qZA(),t.TgZ(7,"p",3),t._uU(8),t.qZA(),t.TgZ(9,"p"),t._uU(10),t.ALo(11,"date"),t.qZA(),t.TgZ(12,"p"),t._uU(13),t.qZA(),t.TgZ(14,"p"),t._uU(15),t.qZA()(),t.TgZ(16,"div")(17,"h3",4),t._uU(18,"Comments"),t.qZA(),t.TgZ(19,"div",5)(20,"div",6),t.YNc(21,x,2,0,"p",7),t.TgZ(22,"div",8),t.YNc(23,f,7,5,"p",9),t.qZA()(),t.TgZ(24,"div",10),t._UZ(25,"input",11,12),t.TgZ(27,"button",13),t.NdJ("click",function(){t.CHM(n);const a=t.MAs(26),c=t.oxw();return t.KtG(c.createComment(a.value))}),t._uU(28," Create "),t.qZA()()()()()()}if(2&e){const n=t.oxw();t.xp6(2),t.Oqu(n.task.name),t.xp6(6),t.hij("Status: ",n.task.status,""),t.xp6(2),t.hij("Created at: ",t.xi3(11,7,n.task.created_at,"medium"),""),t.xp6(3),t.hij("Created by: ",n.task.created_by.username,""),t.xp6(2),t.hij("Comments count: ",n.task.comments.length,""),t.xp6(6),t.Q6J("ngIf",0===n.task.comments.length),t.xp6(2),t.Q6J("ngForOf",n.task.comments)}}let T=(()=>{class e{constructor(n){this.store=n}ngOnInit(){this.storeSub=this.store.pipe((0,i.Ys)(p)).subscribe(n=>this.task=n)}createComment(n){this.store.dispatch(m.jR({comment:{text:n,task:this.task._id}})),this.commentText.nativeElement.value=""}deleteComment(n){this.store.dispatch(m.cT({id:n}))}ngOnDestroy(){this.storeSub&&this.storeSub.unsubscribe()}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(i.yh))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-task-details"]],viewQuery:function(n,r){if(1&n&&t.Gf(h,5),2&n){let a;t.iGM(a=t.CRH())&&(r.commentText=a.first)}},decls:1,vars:1,consts:[["class","container",4,"ngIf"],[1,"container"],[1,"task-content"],[1,"task-status"],[1,"text-center"],[1,"comments-block"],[1,"comments-content"],["class","no-comments",4,"ngIf"],[1,"comments-list"],["class","comment-item",4,"ngFor","ngForOf"],[1,"send-comment"],["type","text","placeholder","your text here",1,"comment-text"],["commentText",""],[1,"btn",3,"click"],[1,"no-comments"],[1,"comment-item"],[1,"delete-comment",3,"click"]],template:function(n,r){1&n&&t.YNc(0,k,29,10,"div",0),2&n&&t.Q6J("ngIf",r.task)},dependencies:[d.sg,d.O5,d.uU],styles:[".comments-list[_ngcontent-%COMP%]::-webkit-scrollbar{width:10px}.comments-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-left:5px transparent solid;background-clip:padding-box;background-color:#a9a9a9}.container[_ngcontent-%COMP%]{width:85%;margin:50px auto 0}.task-content[_ngcontent-%COMP%]{margin-top:30px;display:grid;grid-template-columns:2fr 3fr;gap:50px}.text-center[_ngcontent-%COMP%]{text-align:center}.task-status[_ngcontent-%COMP%]{margin-top:10px}.comments-block[_ngcontent-%COMP%]{margin:10px auto 0;width:80%;height:400px;border:1px solid gray;display:grid;grid-template-rows:90% 10%}.send-comment[_ngcontent-%COMP%]{display:grid;grid-template-columns:70% 30%;grid-template-rows:100%}.btn[_ngcontent-%COMP%]{height:100%;width:100%;cursor:pointer;border:1px solid gray;border-bottom:none;border-right:none}.comment-text[_ngcontent-%COMP%]{padding:5px;border:none;border-top:1px solid gray;outline:none}.comments-content[_ngcontent-%COMP%]{height:100%;padding:20px 10px;display:grid}.no-comments[_ngcontent-%COMP%]{align-self:center;justify-self:center}.comment-item[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{font-size:12px;color:gray}.comments-list[_ngcontent-%COMP%]{display:grid;grid-auto-rows:30px;justify-content:flex-end;overflow-y:auto}.delete-comment[_ngcontent-%COMP%]{cursor:pointer}"]}),e})();var C=o(4466),v=o(8884),y=o(1094),Z=o(8505),M=o(9300),O=o(5698),b=o(3900),g=o(9646),A=o(262);let P=(()=>{class e{constructor(n){this.store=n}canActivate(n,r){const a=n.paramMap.get("taskId");return this.store.pipe((0,i.Ys)(p),(0,Z.b)(c=>{(!c||c._id!==a)&&this.store.dispatch(m.yW({id:a}))}),(0,M.h)(c=>!!c&&c._id===a),(0,O.q)(1),(0,b.w)(()=>(0,g.of)(!0)),(0,A.K)(()=>(0,g.of)(!1)))}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(i.yh))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),_=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[C.m,v.Bz.forChild([{path:":taskId",component:T,canActivate:[y.a,P]}])]}),e})()}}]);