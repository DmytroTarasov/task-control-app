"use strict";(self.webpackChunktask_control=self.webpackChunktask_control||[]).push([[662],{4662:(F,d,o)=>{o.r(d),o.d(d,{TasksModule:()=>D});var i=o(2997),m=o(8663);const g=(0,i.ZF)("tasks"),p=(0,i.P1)(g,n=>n.selectedTask);var t=o(4650),l=o(6895);const h=["commentText"];function f(n,s){1&n&&(t.TgZ(0,"p",13),t._uU(1," No comments yet... "),t.qZA())}function T(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"p",14)(1,"span",15),t.NdJ("click",function(){const c=t.CHM(e).$implicit,_=t.oxw(2);return t.KtG(_.deleteComment(c._id))}),t._uU(2,"\u274c"),t.qZA(),t._uU(3),t.TgZ(4,"span"),t._uU(5),t.ALo(6,"date"),t.qZA()()}if(2&n){const e=s.$implicit;t.xp6(3),t.hij(" ",e.text," "),t.xp6(2),t.Oqu(t.xi3(6,2,e.created_at,"short"))}}function x(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",1)(1,"h1"),t._uU(2),t.qZA(),t.TgZ(3,"div",2)(4,"div")(5,"h3"),t._uU(6,"Details"),t.qZA(),t.TgZ(7,"p"),t._uU(8),t.qZA(),t.TgZ(9,"p"),t._uU(10),t.ALo(11,"date"),t.qZA(),t.TgZ(12,"p"),t._uU(13),t.qZA(),t.TgZ(14,"p"),t._uU(15),t.qZA()(),t.TgZ(16,"div")(17,"h3",3),t._uU(18,"Comments"),t.qZA(),t.TgZ(19,"div",4)(20,"div",5),t.YNc(21,f,2,0,"p",6),t.TgZ(22,"div",7),t.YNc(23,T,7,5,"p",8),t.qZA()(),t.TgZ(24,"div",9),t._UZ(25,"input",10,11),t.TgZ(27,"button",12),t.NdJ("click",function(){t.CHM(e);const a=t.MAs(26),c=t.oxw();return t.KtG(c.createComment(a.value))}),t._uU(28," Create "),t.qZA()()()()()()}if(2&n){const e=t.oxw();t.xp6(2),t.Oqu(e.task.name),t.xp6(6),t.hij("Status: ",e.task.status,""),t.xp6(2),t.hij("Created at: ",t.xi3(11,7,e.task.created_at,"medium"),""),t.xp6(3),t.hij("Created by: ",e.task.created_by.username,""),t.xp6(2),t.hij("Comments count: ",e.task.comments.length,""),t.xp6(6),t.Q6J("ngIf",0===e.task.comments.length),t.xp6(2),t.Q6J("ngForOf",e.task.comments)}}let C=(()=>{class n{constructor(e){this.store=e}ngOnInit(){this.storeSub=this.store.pipe((0,i.Ys)(p)).subscribe(e=>this.task=e)}createComment(e){this.store.dispatch(m.jR({comment:{text:e,task:this.task._id}})),this.commentText.nativeElement.value=""}deleteComment(e){this.store.dispatch(m.cT({id:e}))}ngOnDestroy(){this.storeSub&&this.storeSub.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(i.yh))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-task-details"]],viewQuery:function(e,r){if(1&e&&t.Gf(h,5),2&e){let a;t.iGM(a=t.CRH())&&(r.commentText=a.first)}},decls:1,vars:1,consts:[["class","container",4,"ngIf"],[1,"container"],[1,"task-content"],[1,"text-center"],[1,"comments-block"],[1,"comments-content"],["class","no-comments",4,"ngIf"],[1,"comments-list"],["class","comment-item",4,"ngFor","ngForOf"],[1,"send-comment"],["type","text","placeholder","your text here",1,"comment-text"],["commentText",""],[1,"btn",3,"click"],[1,"no-comments"],[1,"comment-item"],[1,"delete-comment",3,"click"]],template:function(e,r){1&e&&t.YNc(0,x,29,10,"div",0),2&e&&t.Q6J("ngIf",r.task)},dependencies:[l.sg,l.O5,l.uU],styles:[".container[_ngcontent-%COMP%]{width:90%;margin:50px auto 0}.task-content[_ngcontent-%COMP%]{margin-top:30px;display:grid;grid-template-columns:2fr 3fr;gap:50px}.text-center[_ngcontent-%COMP%]{text-align:center}.comments-block[_ngcontent-%COMP%]{margin:0 auto;width:80%;height:300px;border:1px solid gray;overflow-y:scroll;display:grid;grid-template-rows:90% 10%}.send-comment[_ngcontent-%COMP%]{display:grid;grid-template-columns:70% 30%;grid-template-rows:100%}.btn[_ngcontent-%COMP%]{height:100%;width:100%;cursor:pointer}.comment-text[_ngcontent-%COMP%]{padding:5px}.comments-content[_ngcontent-%COMP%]{padding:20px;display:grid}.no-comments[_ngcontent-%COMP%]{align-self:center;justify-self:center}.comment-item[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{font-size:12px;color:gray}.comments-list[_ngcontent-%COMP%]{display:grid;grid-auto-rows:30px;justify-content:flex-end}.delete-comment[_ngcontent-%COMP%]{cursor:pointer}"]}),n})();var k=o(4466),v=o(5431),y=o(1094),Z=o(8505),M=o(9300),O=o(5698),A=o(3900),u=o(9646),P=o(262);let U=(()=>{class n{constructor(e){this.store=e}canActivate(e,r){const a=e.paramMap.get("taskId");return this.store.pipe((0,i.Ys)(p),(0,Z.b)(c=>{(!c||c._id!==a)&&this.store.dispatch(m.yW({id:a}))}),(0,M.h)(c=>!!c&&c._id===a),(0,O.q)(1),(0,A.w)(()=>(0,u.of)(!0)),(0,P.K)(()=>(0,u.of)(!1)))}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(i.yh))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),D=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[k.m,v.Bz.forChild([{path:":taskId",component:C,canActivate:[y.a,U]}])]}),n})()}}]);