"use strict";(self.webpackChunktask_control=self.webpackChunktask_control||[]).push([[378],{7378:(v,l,i)=>{i.r(l),i.d(l,{AuthModule:()=>I});var c=i(4466),e=i(433),p=i(2997),a=i(8379),m=i(9884),t=i(4650),d=i(139),h=i(6895);function g(n,r){if(1&n&&t._UZ(0,"app-text-input",4),2&n){const o=t.oxw();t.Q6J("formControl",o.authForm.controls.username)("label","Username")}}function f(n,r){if(1&n&&(t.TgZ(0,"p",13),t._uU(1),t.qZA()),2&n){const o=r.ngIf;t.xp6(1),t.Oqu(o)}}function C(n,r){if(1&n&&(t.TgZ(0,"p",14),t._uU(1),t.qZA()),2&n){const o=r.ngIf;t.xp6(1),t.Oqu(o)}}function x(n,r){if(1&n&&(t.TgZ(0,"button",15),t._uU(1," Login "),t.qZA()),2&n){const o=t.oxw();t.Q6J("disabled",!o.authForm.valid)}}function M(n,r){if(1&n&&(t.TgZ(0,"button",15),t._uU(1," Register "),t.qZA()),2&n){const o=t.oxw();t.Q6J("disabled",!o.authForm.valid)}}let b=(()=>{class n{constructor(o){this.store=o,this.isLoginMode=!1}ngOnInit(){this.authForm=new e.cw({email:new e.NI("",[e.kI.required,e.kI.pattern("^[a-z0-9._%+-]+@[a-z0-9]+\\.[a-z]{2,4}$")]),password:new e.NI("",[e.kI.required,e.kI.minLength(6)])}),this.handleUsernameControl(),this.authError$=this.store.pipe((0,p.Ys)(m.Gl)),this.authMessage$=this.store.pipe((0,p.Ys)(m.PN))}onSwitchMode(){this.store.dispatch(a.fw()),this.store.dispatch(a.yn()),this.isLoginMode=!this.isLoginMode,this.handleUsernameControl()}onSubmit(){if(!this.authForm.valid)return;const{email:o,username:s,password:u}=this.authForm.value;this.store.dispatch(this.isLoginMode?a.x4({email:o,password:u}):a.IU({email:o,password:u,username:s}))}handleUsernameControl(){this.isLoginMode?this.authForm.removeControl("username"):this.authForm.addControl("username",new e.NI("",[e.kI.required]))}}return n.\u0275fac=function(o){return new(o||n)(t.Y36(p.yh))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-auth"]],decls:18,vars:16,consts:[[1,"container"],[1,"header"],[1,"wrapper"],[1,"auth-form",3,"formGroup","ngSubmit"],[3,"formControl","label"],[3,"formControl","label",4,"ngIf"],[3,"formControl","label","type"],["class","text-danger",4,"ngIf"],["class","text-success",4,"ngIf"],[1,"mt-20"],[1,"btn-group"],["class","btn","type","submit",3,"disabled",4,"ngIf"],["type","button",1,"btn",3,"click"],[1,"text-danger"],[1,"text-success"],["type","submit",1,"btn",3,"disabled"]],template:function(o,s){1&o&&(t.TgZ(0,"div",0)(1,"h2",1),t._uU(2,"Authentication form"),t.qZA(),t.TgZ(3,"div",2)(4,"form",3),t.NdJ("ngSubmit",function(){return s.onSubmit()}),t._UZ(5,"app-text-input",4),t.YNc(6,g,1,2,"app-text-input",5),t._UZ(7,"app-text-input",6),t.YNc(8,f,2,1,"p",7),t.ALo(9,"async"),t.YNc(10,C,2,1,"p",8),t.ALo(11,"async"),t.TgZ(12,"div",9)(13,"div",10),t.YNc(14,x,2,1,"button",11),t.YNc(15,M,2,1,"button",11),t.TgZ(16,"button",12),t.NdJ("click",function(){return s.onSwitchMode()}),t._uU(17),t.qZA()()()()()()),2&o&&(t.xp6(4),t.Q6J("formGroup",s.authForm),t.xp6(1),t.Q6J("formControl",s.authForm.controls.email)("label","Email"),t.xp6(1),t.Q6J("ngIf",!s.isLoginMode),t.xp6(1),t.Q6J("formControl",s.authForm.controls.password)("label","Password")("type","password"),t.xp6(1),t.Q6J("ngIf",t.lcZ(9,12,s.authError$)),t.xp6(2),t.Q6J("ngIf",t.lcZ(11,14,s.authMessage$)),t.xp6(4),t.Q6J("ngIf",s.isLoginMode),t.xp6(1),t.Q6J("ngIf",!s.isLoginMode),t.xp6(2),t.hij("Switch to ",s.isLoginMode?"Register":"Login",""))},dependencies:[d.t,e._Y,e.JJ,e.JL,e.oH,e.sg,h.O5,h.Ov],styles:[".container[_ngcontent-%COMP%]{margin-top:100px}.header[_ngcontent-%COMP%]{text-align:center;margin:15px 0}.wrapper[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;width:450px;margin:0 auto}.auth-form[_ngcontent-%COMP%], .auth-form[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{font-size:16px;width:100%}.text-success[_ngcontent-%COMP%]{color:#29a21b}.mt-20[_ngcontent-%COMP%]{margin-top:20px}.btn-group[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.btn[_ngcontent-%COMP%]{width:100px;text-transform:uppercase}.text-danger[_ngcontent-%COMP%]{color:#d10d0a}"]}),n})();var A=i(5431);let I=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[c.m,A.Bz.forChild([{path:"",component:b}])]}),n})()}}]);