"use strict";(self.webpackChunktask_control=self.webpackChunktask_control||[]).push([[383],{8383:(At,M,a)=>{a.r(M),a.d(M,{BoardsModule:()=>Ft});var f=a(5431),E=a(4466),O=a(1094),c=a(2997),y=a(8505),T=a(9300),w=a(5698),Z=a(3900),g=a(9646),F=a(262),p=a(6065),_=a(1379),t=a(4650);let H=(()=>{class n{constructor(e){this.store=e}canActivate(e,r){const o=e.paramMap.get("boardId");return this.store.pipe((0,c.Ys)(_.m9),(0,y.b)(i=>{(!i||i._id!==o)&&this.store.dispatch(p.WU({id:o}))}),(0,T.h)(i=>!!i&&i._id===o),(0,w.q)(1),(0,Z.w)(()=>(0,g.of)(!0)),(0,F.K)(()=>(0,g.of)(!1)))}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(c.yh))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),J=(()=>{class n{constructor(e){this.store=e}canActivate(e,r){return this.store.pipe((0,c.Ys)(_.DC),(0,y.b)(o=>{o||this.store.dispatch(p.DC({}))}),(0,T.h)(o=>!!o),(0,w.q)(1),(0,Z.w)(()=>(0,g.of)(!0)),(0,F.K)(()=>(0,g.of)(!1)))}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(c.yh))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class h{constructor(s,e="asc",r,o){this.sortBy=s,this.sortDirection=e,this.boardName=r,this.taskName=o}}var v=a(8967),u=a(433);const I=(0,c.ZF)("modal"),N=(0,c.P1)(I,n=>n.open);var d=a(6895),L=a(139);function S(n,s){if(1&n&&(t._UZ(0,"app-text-input",9),t.ALo(1,"titlecase")),2&n){const e=s.$implicit,r=t.oxw(2);t.Q6J("formControl",r.form.controls[e])("label",t.lcZ(1,2,e))}}function G(n,s){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",1)(2,"div",2),t.NdJ("click",function(o){return o.stopPropagation()}),t.TgZ(3,"button",3),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.close())}),t._uU(4,"X"),t.qZA(),t.TgZ(5,"div",4),t._uU(6),t.qZA(),t.TgZ(7,"div",5)(8,"form",6),t.NdJ("ngSubmit",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.onSubmit())}),t.YNc(9,S,2,4,"app-text-input",7),t.TgZ(10,"button",8),t._uU(11),t.qZA()()()()(),t.BQk()}if(2&n){const e=s.ngIf,r=t.oxw();t.xp6(1),t.ekj("open",e),t.xp6(5),t.Oqu(r.modalHeader),t.xp6(2),t.Q6J("formGroup",r.form),t.xp6(1),t.Q6J("ngForOf",r.formInputNames),t.xp6(1),t.Q6J("disabled",!r.form.valid),t.xp6(1),t.Oqu(r.btnSubmitText)}}let A=(()=>{class n{constructor(e){this.store=e}ngOnInit(){this.form=new u.cw({}),this.formInputNames.forEach(e=>{this.form.addControl(e,new u.NI(null,[u.kI.required]))}),this.modalOpen$=this.store.pipe((0,c.Ys)(N))}onSubmit(){switch(this.mode){case"board":this.store.dispatch(p.aX({board:this.form.value}));break;case"task":this.store.dispatch(p.vr({...this.form.value,status:this.taskStatus}));break;default:this.close()}this.close()}close(){this.form.reset(),this.store.dispatch(v.M())}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(c.yh))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-modal"]],inputs:{modalHeader:"modalHeader",formInputNames:"formInputNames",btnSubmitText:"btnSubmitText",mode:"mode",taskStatus:"taskStatus"},decls:2,vars:3,consts:[[4,"ngIf"],[1,"modal-wrapper"],[1,"modal-content",3,"click"],["type","button",1,"close",3,"click"],[1,"modal-header"],[1,"modal-body"],[1,"form",3,"formGroup","ngSubmit"],[3,"formControl","label",4,"ngFor","ngForOf"],["type","submit",1,"btn",3,"disabled"],[3,"formControl","label"]],template:function(e,r){1&e&&(t.YNc(0,G,12,7,"ng-container",0),t.ALo(1,"async")),2&e&&t.Q6J("ngIf",t.lcZ(1,1,r.modalOpen$))},dependencies:[d.sg,d.O5,u._Y,u.JJ,u.JL,u.oH,u.sg,L.t,d.Ov,d.rS],styles:[".modal-wrapper[_ngcontent-%COMP%]{visibility:hidden;opacity:0;display:block;position:absolute;inset:0;background:rgba(0,0,0,.2);transition:opacity .25s ease-in;z-index:50}.open[_ngcontent-%COMP%]{visibility:visible;opacity:1}.modal-content[_ngcontent-%COMP%]{position:absolute;top:30%;left:50%;width:400px;transform:translate(-50%);background:#fff;padding:30px;border-radius:8px;box-shadow:0 0 8px 4px #0000001a}.modal-header[_ngcontent-%COMP%]{text-align:center;font-size:24px;font-weight:700}.close[_ngcontent-%COMP%]{position:absolute;background:transparent;border:none;top:0;right:0;padding:16px}.close[_ngcontent-%COMP%]:hover{cursor:pointer}.form[_ngcontent-%COMP%], .form[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{font-size:16px;width:100%}.form-input[_ngcontent-%COMP%]{margin-top:8px;height:30px;border-radius:5px}.text-danger[_ngcontent-%COMP%]{color:#d10d0a}.btn[_ngcontent-%COMP%]{margin-top:20px;width:100px;text-transform:uppercase}"]}),n})();const Q=["filter"];function q(n,s){if(1&n&&(t.TgZ(0,"option",9),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.s9C("value",e.value),t.xp6(1),t.hij(" ",e.name," ")}}let B=(()=>{class n{constructor(e){this.renderer=e,this.sortEvent=new t.vpe,this.filterEvent=new t.vpe,this.resetEvent=new t.vpe}ngOnInit(){}notifySort(e,r,o,i,l){this.setElementColor(r),this.setElementColor(o),this.setElementColor(e.target,"#C7C8BE"),this.sortEvent.emit({target:e.target,sortByValue:i,filterValue:l})}notifyFilter(e){this.filterEvent.emit(e)}notifyResetFilter(e,r){this.filter.nativeElement.value="",this.setElementColor(e),this.setElementColor(r),this.resetEvent.emit()}setElementColor(e,r="#F0F0F0"){this.renderer.setStyle(e,"background-color",r)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.Qsj))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-filter"]],viewQuery:function(e,r){if(1&e&&t.Gf(Q,5),2&e){let o;t.iGM(o=t.CRH())&&(r.filter=o.first)}},inputs:{selectOptions:"selectOptions"},outputs:{sortEvent:"sortEvent",filterEvent:"filterEvent",resetEvent:"resetEvent"},decls:18,vars:7,consts:[[1,"query-options"],["name",""],["sortBy",""],[3,"value",4,"ngFor","ngForOf"],[1,"btn",3,"click"],["sortAsc",""],["sortDesc",""],["type","text","name","name","placeholder","name",1,"filter-input"],["filter",""],[3,"value"]],template:function(e,r){if(1&e){const o=t.EpF();t.TgZ(0,"div",0)(1,"select",1,2),t.YNc(3,q,2,2,"option",3),t.qZA(),t.TgZ(4,"button",4,5),t.NdJ("click",function(l){t.CHM(o);const m=t.MAs(5),b=t.MAs(9),x=t.MAs(2),k=t.MAs(13);return t.KtG(r.notifySort(l,m,b,x.value,k.value))}),t._uU(6),t.ALo(7,"uppercase"),t.qZA(),t.TgZ(8,"button",4,6),t.NdJ("click",function(l){t.CHM(o);const m=t.MAs(5),b=t.MAs(9),x=t.MAs(2),k=t.MAs(13);return t.KtG(r.notifySort(l,m,b,x.value,k.value))}),t._uU(10),t.ALo(11,"uppercase"),t.qZA(),t._UZ(12,"input",7,8),t.TgZ(14,"button",4),t.NdJ("click",function(){t.CHM(o);const l=t.MAs(13);return t.KtG(r.notifyFilter(l.value))}),t._uU(15,"Filter"),t.qZA(),t.TgZ(16,"button",4),t.NdJ("click",function(){t.CHM(o);const l=t.MAs(5),m=t.MAs(9);return t.KtG(r.notifyResetFilter(l,m))}),t._uU(17,"Reset"),t.qZA()()}2&e&&(t.xp6(3),t.Q6J("ngForOf",r.selectOptions),t.xp6(3),t.Oqu(t.lcZ(7,3,"asc")),t.xp6(4),t.Oqu(t.lcZ(11,5,"desc")))},dependencies:[d.sg,u.YN,u.Kr,d.gd],styles:[".query-options[_ngcontent-%COMP%]{margin:10px auto;display:grid;grid-template-columns:200px 100px 100px 200px 100px 100px;grid-template-rows:30px;gap:20px;justify-content:flex-end}.filter-input[_ngcontent-%COMP%]{height:100%;width:100%;border-radius:5px;font-size:16px;padding:2px 5px}.btn[_ngcontent-%COMP%]{border-radius:5px;cursor:pointer}"]}),n})();var C=a(2972);let U=(()=>{class n{constructor(e,r){this.elementRef=e,this.store=r}handleFocusOut(){const e=this.elementRef.nativeElement.attributes.getNamedItem("ng-reflect-name").value;this.store.dispatch(p.rE({colorType:e,color:this.elementRef.nativeElement.value}))}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.SBq),t.Y36(c.yh))},n.\u0275dir=t.lG2({type:n,selectors:[["","appHandleColorChange",""]],hostBindings:function(e,r){1&e&&t.NdJ("focusout",function(){return r.handleFocusOut()})}}),n})(),Y=(()=>{class n{constructor(e){this.renderer=e}openOptions(){const e=this.appOpenOptions.classList.contains("hide")?"removeClass":"addClass";this.renderer[e](this.appOpenOptions,"hide")}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.Qsj))},n.\u0275dir=t.lG2({type:n,selectors:[["","appOpenOptions",""]],hostBindings:function(e,r){1&e&&t.NdJ("click",function(){return r.openOptions()})},inputs:{appOpenOptions:"appOpenOptions"}}),n})(),D=(()=>{class n{constructor(){}setFocus(){this.appFocus.focus()}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=t.lG2({type:n,selectors:[["","appFocus",""]],hostBindings:function(e,r){1&e&&t.NdJ("click",function(){return r.setFocus()})},inputs:{appFocus:"appFocus"}}),n})();const j=["taskName"],K=["options"];function z(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"p",13),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.archiveTask())}),t._uU(1,"Archive"),t.qZA()}}const R=function(n){return["/tasks",n]};function V(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",1)(1,"a",2),t._uU(2,"\u2192"),t.qZA(),t.TgZ(3,"input",3,4),t.NdJ("blur",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.editTask())}),t.qZA(),t.TgZ(5,"p",5),t._uU(6),t.ALo(7,"date"),t.qZA(),t.TgZ(8,"div",6),t._UZ(9,"div",7)(10,"div",7)(11,"div",7),t.qZA(),t.TgZ(12,"div",8,9)(14,"p",10),t._uU(15,"Edit"),t.qZA(),t.TgZ(16,"p",11),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.deleteTask())}),t._uU(17,"Delete"),t.qZA(),t.YNc(18,z,2,0,"p",12),t.qZA()()}if(2&n){const e=t.MAs(4),r=t.MAs(13),o=t.oxw();t.xp6(1),t.Q6J("routerLink",t.VKq(11,R,o.task._id)),t.xp6(2),t.s9C("value",o.task.name),t.Q6J("ngClass",o.task.archived?"text-crossed-out":"null")("disabled",o.task.archived),t.xp6(3),t.Oqu(t.xi3(7,8,o.task.created_at,"medium")),t.xp6(2),t.Q6J("appOpenOptions",r),t.xp6(6),t.Q6J("appFocus",e),t.xp6(4),t.Q6J("ngIf","Done"===o.task.status&&!o.task.archived)}}let X=(()=>{class n{constructor(e){this.store=e}ngOnInit(){}editTask(){const e=this.taskNameField.nativeElement.value;e!==this.task.name&&(this.store.dispatch(p.tc({id:this.task._id,newName:e,newStatus:this.task.status})),this.options.nativeElement.classList.add("hide"))}deleteTask(){this.store.dispatch(p.xU({id:this.task._id}))}archiveTask(){this.store.dispatch(p.z2({id:this.task._id}))}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(c.yh))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-task-item"]],viewQuery:function(e,r){if(1&e&&(t.Gf(j,5),t.Gf(K,5)),2&e){let o;t.iGM(o=t.CRH())&&(r.taskNameField=o.first),t.iGM(o=t.CRH())&&(r.options=o.first)}},inputs:{task:"task"},decls:1,vars:1,consts:[["class","task-item",4,"ngIf"],[1,"task-item"],[1,"task-link",3,"routerLink"],["name","name",1,"task-title",3,"ngClass","value","disabled","blur"],["taskName",""],[1,"task-date"],[1,"dots",3,"appOpenOptions"],[1,"dot"],[1,"task-options","hide"],["options",""],[3,"appFocus"],[1,"delete",3,"click"],["class","archive",3,"click",4,"ngIf"],[1,"archive",3,"click"]],template:function(e,r){1&e&&t.YNc(0,V,19,13,"div",0),2&e&&t.Q6J("ngIf",r.task)},dependencies:[f.yS,Y,D,d.mk,d.O5,d.uU],styles:[".dots[_ngcontent-%COMP%]{display:grid;grid-template-columns:8px;grid-auto-rows:8px;gap:2px;position:absolute;right:5%;top:15%;cursor:pointer}.dot[_ngcontent-%COMP%]{height:100%;width:100%;border-radius:100%;background-color:#fff}.task-options[_ngcontent-%COMP%]{padding:5px;width:70px;position:absolute;background-color:#d0d0cc;color:#000;font-size:14px;border-radius:5px;display:grid;grid-template-rows:repeat(2,1fr);align-items:center;top:-50%;right:2%}.task-options[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{cursor:pointer}.hide[_ngcontent-%COMP%]{display:none}.task-title[_ngcontent-%COMP%]{display:block;width:100%;height:100%;background-color:transparent;border:none;font-size:16px;text-align:center;cursor:pointer;color:#fff}.task-item[_ngcontent-%COMP%]{width:100%;height:100%;background-color:#a3a49e;display:grid;grid-auto-rows:30px;align-content:center;color:#fff;position:relative;cursor:pointer}.task-date[_ngcontent-%COMP%]{margin-right:5%;font-size:12px;justify-self:flex-end}.text-crossed-out[_ngcontent-%COMP%]{text-decoration:line-through}.task-link[_ngcontent-%COMP%]{position:absolute;bottom:5px;right:5px;font-size:18px;font-weight:700;text-decoration:none;color:#fff}"]}),n})(),P=(()=>{class n{transform(e,r,o="status"){if(0===e.length||!r)return e;let i=[];for(let l of e)l[o].toLowerCase().includes(r.toLowerCase())&&i.push(l);return i}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275pipe=t.Yjl({name:"filter",type:n,pure:!0}),n})();function W(n,s){if(1&n&&(t.TgZ(0,"div",8),t._UZ(1,"app-task-item",9),t.qZA()),2&n){const e=s.$implicit;t.xp6(1),t.Q6J("task",e)}}const $=function(n){return{backgroundColor:n}};function tt(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",1)(1,"h3",2),t._uU(2),t.qZA(),t.TgZ(3,"div",3)(4,"input",4),t.NdJ("ngModelChange",function(o){t.CHM(e);const i=t.oxw();return t.KtG(i.color=o)}),t.qZA(),t.TgZ(5,"div",5),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.openModal(o.status))}),t.qZA(),t.TgZ(6,"div",6),t.NdJ("cdkDropListDropped",function(o){t.CHM(e);const i=t.oxw();return t.KtG(i.drop(o))}),t.ALo(7,"filter"),t.YNc(8,W,2,1,"div",7),t.ALo(9,"filter"),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(2),t.Oqu(e.title),t.xp6(1),t.Q6J("ngStyle",t.VKq(14,$,e.color)),t.xp6(1),t.s9C("value",e.color),t.s9C("name",e.transformStatus()),t.Q6J("ngModel",e.color),t.xp6(2),t.s9C("id",e.createContainerId(e.status)),t.Q6J("cdkDropListData",t.xi3(7,8,e.board.tasks,e.status)),t.xp6(2),t.Q6J("ngForOf",t.xi3(9,11,e.board.tasks,e.status))}}let et=(()=>{class n{constructor(e){this.store=e,this.openModalEvent=new t.vpe,this.color="#F0F0F0"}ngOnInit(){this.storeSub=this.store.pipe((0,c.Ys)(_.m9)).subscribe(e=>{this.board=e,this.board&&(this.color=this.board[this.transformStatus()])})}openModal(e){this.openModalEvent.emit(e)}drop(e){if(e.previousContainer!==e.container){const r=this.transformContainerId(e.container.id),o=e.previousContainer.data[e.previousIndex];this.store.dispatch(p.tc({id:o._id,newName:o.name,newStatus:r}))}}transformStatus(){return this.status.toLowerCase().split(" ").join("_")+"_color"}createContainerId(e){return e.toLowerCase().split(" ").join("_")}transformContainerId(e){return e.split("_").map(r=>r.charAt(0).toUpperCase()+r.slice(1)).join(" ")}ngOnDestroy(){this.storeSub&&this.storeSub.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(c.yh))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-task-column"]],inputs:{title:"title",status:"status"},outputs:{openModalEvent:"openModalEvent"},decls:1,vars:1,consts:[["class","col",4,"ngIf"],[1,"col"],[1,"title"],[1,"col-content",3,"ngStyle"],["type","color","appHandleColorChange","",1,"colorpicker",3,"value","ngModel","name","ngModelChange"],[1,"add-task",3,"click"],["cdkDropList","","cdkDropListSortingDisabled","",1,"task-items",3,"id","cdkDropListData","cdkDropListDropped"],["cdkDrag","",4,"ngFor","ngForOf"],["cdkDrag",""],[3,"task"]],template:function(e,r){1&e&&t.YNc(0,tt,10,16,"div",0),2&e&&t.Q6J("ngIf",r.board)},dependencies:[U,u.Fj,u.JJ,u.On,C.Wj,C.Zt,d.sg,d.O5,d.PC,X,P],styles:['.col[_ngcontent-%COMP%]{height:100%;width:100%}.col-content[_ngcontent-%COMP%]{padding:30px 10px 10px;height:100%;overflow-y:scroll;display:grid;grid-template-rows:50px;gap:20px;position:relative}.title[_ngcontent-%COMP%]{text-align:center}.add-task[_ngcontent-%COMP%]{width:100%;height:100%;background-color:#a3a49e;position:relative;cursor:pointer}.add-task[_ngcontent-%COMP%]:after{content:"";position:absolute;display:block;background-color:#000;width:5px;height:30px;top:50%;left:50%;z-index:9;transform:translate(-50%,-50%)}.add-task[_ngcontent-%COMP%]:before{content:"";position:absolute;display:block;background-color:#000;width:30px;height:5px;left:50%;top:50%;z-index:9;transform:translate(-50%,-50%)}.task-items[_ngcontent-%COMP%]{display:grid;grid-auto-rows:80px;gap:20px}.colorpicker[_ngcontent-%COMP%]{position:absolute;right:10px;top:5px;border:1px solid gray;height:20px;cursor:pointer}']}),n})();const nt=function(){return{name:"Name",value:"name"}},ot=function(){return{name:"Created At",value:"created_at"}},rt=function(n,s){return[n,s]};function st(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",2)(1,"div",3)(2,"h1",4),t._uU(3),t.qZA(),t.TgZ(4,"button",5),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.deleteBoard())}),t._uU(5,"Delete"),t.qZA()(),t.TgZ(6,"app-filter",6),t.NdJ("sortEvent",function(o){t.CHM(e);const i=t.oxw();return t.KtG(i.sortTasks(o))})("filterEvent",function(o){t.CHM(e);const i=t.oxw();return t.KtG(i.filterTasks(o))})("resetEvent",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.resetFilter())}),t.qZA(),t.TgZ(7,"div",7)(8,"app-task-column",8),t.NdJ("openModalEvent",function(o){t.CHM(e);const i=t.oxw();return t.KtG(i.openModal(o))}),t.qZA(),t.TgZ(9,"app-task-column",8),t.NdJ("openModalEvent",function(o){t.CHM(e);const i=t.oxw();return t.KtG(i.openModal(o))}),t.qZA(),t.TgZ(10,"app-task-column",8),t.NdJ("openModalEvent",function(o){t.CHM(e);const i=t.oxw();return t.KtG(i.openModal(o))}),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(3),t.Oqu(e.board.name),t.xp6(3),t.Q6J("selectOptions",t.WLB(10,rt,t.DdM(8,nt),t.DdM(9,ot))),t.xp6(2),t.Q6J("title","Todo")("status","Todo"),t.xp6(1),t.Q6J("title","In Progress")("status","In Progress"),t.xp6(1),t.Q6J("title","Done")("status","Done")}}const it=function(){return["name"]};let at=(()=>{class n{constructor(e){this.store=e,this.taskStatus="Todo"}ngOnInit(){this.storeSub=this.store.pipe((0,c.Ys)(_.m9)).subscribe(e=>this.board=e)}sortTasks(e){const{target:r,sortByValue:o,filterValue:i}=e,l=new h(o,r.innerText.toLowerCase(),null,i);this.store.dispatch(p.WU({id:this.board._id,queryParams:l}))}filterTasks(e){const r=new h(null,null,null,e);this.store.dispatch(p.WU({id:this.board._id,queryParams:r}))}resetFilter(){this.store.dispatch(p.WU({id:this.board._id}))}openModal(e){this.taskStatus=e,this.store.dispatch(v.h())}deleteBoard(){this.store.dispatch(p.L1({id:this.board._id}))}ngOnDestroy(){this.storeSub&&this.storeSub.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(c.yh))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-board-details"]],decls:2,vars:7,consts:[["class","container",4,"ngIf"],[3,"modalHeader","formInputNames","btnSubmitText","mode","taskStatus"],[1,"container"],[1,"board-header"],[1,"board-name"],[1,"btn","delete-board",3,"click"],[3,"selectOptions","sortEvent","filterEvent","resetEvent"],["cdkDropListGroup","",1,"content"],[3,"title","status","openModalEvent"]],template:function(e,r){1&e&&(t.YNc(0,st,11,13,"div",0),t._UZ(1,"app-modal",1)),2&e&&(t.Q6J("ngIf",r.board),t.xp6(1),t.Q6J("modalHeader","Create task")("formInputNames",t.DdM(6,it))("btnSubmitText","Create")("mode","task")("taskStatus",r.taskStatus))},dependencies:[A,B,C.Fd,d.O5,et],styles:[".container[_ngcontent-%COMP%]{width:90%;margin:50px auto 0}.content[_ngcontent-%COMP%]{margin-top:30px;display:grid;grid-template-columns:repeat(3,1fr);grid-template-rows:350px;gap:80px}.text-center[_ngcontent-%COMP%]{text-align:center}.board-header[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);align-items:center}.board-name[_ngcontent-%COMP%]{justify-self:flex-start}.delete-board[_ngcontent-%COMP%]{justify-self:flex-end}.btn[_ngcontent-%COMP%]{height:30px;width:100px;border-radius:5px;cursor:pointer}"]}),n})();var ct=a(1228);let pt=(()=>{class n{constructor(e,r){this.elementRef=e,this.renderer=r}handleMouseOver(){this.renderer.removeClass(this.appHover,"hide"),this.renderer.addClass(this.elementRef.nativeElement,"hide-text")}handleMouseLeave(){this.renderer.addClass(this.appHover,"hide"),this.renderer.removeClass(this.elementRef.nativeElement,"hide-text")}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.SBq),t.Y36(t.Qsj))},n.\u0275dir=t.lG2({type:n,selectors:[["","appHover",""]],hostBindings:function(e,r){1&e&&t.NdJ("mouseenter",function(){return r.handleMouseOver()})("mouseleave",function(){return r.handleMouseLeave()})},inputs:{appHover:"appHover"}}),n})(),dt=(()=>{class n{transform(e){return e.length}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275pipe=t.Yjl({name:"length",type:n,pure:!0}),n})();const lt=["boardName"],ut=function(n){return[n]};function mt(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",1)(1,"input",2,3),t.NdJ("blur",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.editBoard())}),t.qZA(),t.TgZ(3,"p",4),t._uU(4,"Edit"),t.qZA(),t.TgZ(5,"a",5),t._uU(6,"\u2192"),t.qZA(),t.TgZ(7,"div",6)(8,"p",7),t._uU(9),t.qZA(),t.TgZ(10,"p",8),t._uU(11),t.ALo(12,"date"),t.qZA(),t.TgZ(13,"div",9,10)(15,"p"),t._uU(16),t.ALo(17,"length"),t.ALo(18,"filter"),t.qZA(),t.TgZ(19,"p"),t._uU(20),t.ALo(21,"length"),t.ALo(22,"filter"),t.qZA(),t.TgZ(23,"p"),t._uU(24),t.ALo(25,"length"),t.ALo(26,"filter"),t.qZA()()()()}if(2&n){const e=t.MAs(2),r=t.MAs(14),o=t.oxw();t.xp6(1),t.s9C("value",o.board.name),t.xp6(2),t.Q6J("appFocus",e),t.xp6(2),t.Q6J("routerLink",t.VKq(27,ut,o.board._id)),t.xp6(2),t.Q6J("appHover",r),t.xp6(2),t.Oqu(o.board.description),t.xp6(2),t.Oqu(t.xi3(12,9,o.board.created_at,"medium")),t.xp6(5),t.hij("Todo: ",t.lcZ(17,12,t.xi3(18,14,o.board.tasks,"Todo")),""),t.xp6(4),t.hij("In progress: ",t.lcZ(21,17,t.xi3(22,19,o.board.tasks,"In Progress")),""),t.xp6(4),t.hij("Done: ",t.lcZ(25,22,t.xi3(26,24,o.board.tasks,"Done")),"")}}let _t=(()=>{class n{constructor(e){this.store=e}ngOnInit(){this.storeSub=this.store.pipe((0,c.Ys)((0,_.WU)(this.id))).subscribe(e=>this.board=e)}editBoard(){const e=this.boardNameField.nativeElement.value;e!==this.board.name&&this.store.dispatch(p.wN({id:this.board._id,newName:e}))}ngOnDestroy(){this.storeSub&&this.storeSub.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(c.yh))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-board-item"]],viewQuery:function(e,r){if(1&e&&t.Gf(lt,5),2&e){let o;t.iGM(o=t.CRH())&&(r.boardNameField=o.first)}},inputs:{id:"id"},decls:1,vars:1,consts:[["class","board-item",4,"ngIf"],[1,"board-item"],["name","name",1,"board-title",3,"value","blur"],["boardName",""],[1,"board-edit",3,"appFocus"],[1,"board-link",3,"routerLink"],[1,"board-content",3,"appHover"],[1,"board-body"],[1,"board-footer"],[1,"board-overlay","hide"],["overlay",""]],template:function(e,r){1&e&&t.YNc(0,mt,27,29,"div",0),2&e&&t.Q6J("ngIf",r.board)},dependencies:[f.yS,D,pt,d.O5,P,dt,d.uU],styles:[".board-item[_ngcontent-%COMP%]{padding:20px;width:100%;height:100%;border-radius:10px;background-color:#d6dad6;position:relative}.board-content[_ngcontent-%COMP%]{margin-top:10px;width:100%;height:60%;display:grid;grid-template-rows:60% 40%;grid-template-columns:100%;justify-items:center;position:relative;cursor:pointer}.board-body[_ngcontent-%COMP%]{font-size:14px}.board-title[_ngcontent-%COMP%]{display:block;width:100%;background-color:transparent;border:none;font-weight:700;font-size:18px;text-align:center;cursor:pointer;align-self:center}.board-footer[_ngcontent-%COMP%]{font-size:10px;align-self:flex-end}.board-edit[_ngcontent-%COMP%]{position:absolute;top:5px;right:5px;font-size:12px;cursor:pointer}.board-link[_ngcontent-%COMP%]{position:absolute;bottom:5px;right:5px;font-size:18px;font-weight:700;text-decoration:none;color:#000}.hide[_ngcontent-%COMP%]{display:none!important}.board-overlay[_ngcontent-%COMP%]{position:absolute;height:100%;width:100%;border-radius:10px;display:grid;grid-template-rows:repeat(3,1fr);gap:15px;justify-content:center;justify-items:center;align-items:center;color:#000!important}.hide-text[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{color:#d6dad6}"]}),n})();const ft=["sortAsc"],gt=["sortDesc"],ht=["sortBy"],vt=["filter"];function Ct(n,s){1&n&&t._UZ(0,"app-board-item",7),2&n&&t.Q6J("id",s.$implicit._id)}const bt=function(){return{name:"Name",value:"name"}},xt=function(){return{name:"Created At",value:"created_at"}},kt=function(){return{name:"Tasks (Todo)",value:"todo"}},Mt=function(){return{name:"Tasks (In progress)",value:"in progress"}},Ot=function(){return{name:"Tasks (Done)",value:"done"}},yt=function(n,s,e,r,o){return[n,s,e,r,o]},Tt=function(){return["name","description"]},wt=[{path:"",component:(()=>{class n{constructor(e,r,o){this.boardsService=e,this.renderer=r,this.store=o}ngOnInit(){this.storeSub=this.store.pipe((0,c.Ys)(_.DC)).subscribe(e=>this.boards=e)}openModal(){this.store.dispatch(v.h())}setElementColor(e,r="#F0F0F0"){this.renderer.setStyle(e,"background-color",r)}sortBoards(e){const{target:r,sortByValue:o,filterValue:i}=e,l=new h(o,r.innerText.toLowerCase(),i);if(["todo","in progress","done"].includes(o)){const m=this.boardsService.sortBoards(this.boards,"status",o,r.innerText.toLowerCase());this.store.dispatch(p.bw({boards:m}))}else this.store.dispatch(p.DC({queryParams:l}))}filterBoards(e){const r=new h(null,null,e);this.store.dispatch(p.DC({queryParams:r}))}resetFilter(){this.store.dispatch(p.DC({}))}ngOnDestroy(){this.storeSub&&this.storeSub.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(ct.E),t.Y36(t.Qsj),t.Y36(c.yh))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-board-list"]],viewQuery:function(e,r){if(1&e&&(t.Gf(ft,5),t.Gf(gt,5),t.Gf(ht,5),t.Gf(vt,5)),2&e){let o;t.iGM(o=t.CRH())&&(r.sortAsc=o.first),t.iGM(o=t.CRH())&&(r.sortDesc=o.first),t.iGM(o=t.CRH())&&(r.sortBy=o.first),t.iGM(o=t.CRH())&&(r.filter=o.first)}},decls:10,vars:18,consts:[[1,"container"],[3,"selectOptions","sortEvent","filterEvent","resetEvent"],[1,"content"],[1,"new-board",3,"click"],[1,"new-board-title"],["class","w-100 h-100",3,"id",4,"ngFor","ngForOf"],[3,"modalHeader","formInputNames","btnSubmitText","mode"],[1,"w-100","h-100",3,"id"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0)(1,"h1"),t._uU(2,"Dashboard"),t.qZA(),t.TgZ(3,"app-filter",1),t.NdJ("sortEvent",function(i){return r.sortBoards(i)})("filterEvent",function(i){return r.filterBoards(i)})("resetEvent",function(){return r.resetFilter()}),t.qZA(),t.TgZ(4,"div",2)(5,"div",3),t.NdJ("click",function(){return r.openModal()}),t.TgZ(6,"span",4),t._uU(7,"Add new"),t.qZA()(),t.YNc(8,Ct,1,1,"app-board-item",5),t.qZA()(),t._UZ(9,"app-modal",6)),2&e&&(t.xp6(3),t.Q6J("selectOptions",t.qbA(11,yt,t.DdM(6,bt),t.DdM(7,xt),t.DdM(8,kt),t.DdM(9,Mt),t.DdM(10,Ot))),t.xp6(5),t.Q6J("ngForOf",r.boards),t.xp6(1),t.Q6J("modalHeader","Create board")("formInputNames",t.DdM(17,Tt))("btnSubmitText","Create")("mode","board"))},dependencies:[A,B,d.sg,_t],styles:['.container[_ngcontent-%COMP%]{width:90%;margin:50px auto 0}.new-board[_ngcontent-%COMP%]{width:100px;height:100px;border-radius:10px;background-color:#d6dad6;position:relative}.new-board[_ngcontent-%COMP%]:after{content:"";position:absolute;display:block;background-color:#000;height:5px;top:50%;left:35px;right:35px;z-index:9;transform:translateY(-50%)}.new-board[_ngcontent-%COMP%]:before{content:"";position:absolute;display:block;background-color:#000;width:5px;left:50%;top:35px;bottom:35px;z-index:9;transform:translate(-50%)}.new-board-title[_ngcontent-%COMP%]{position:absolute;bottom:10%;left:10%;right:10%;text-align:center}.new-board[_ngcontent-%COMP%]:hover{cursor:pointer}.content[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(5,1fr);grid-template-rows:180px;grid-auto-rows:180px;gap:40px;justify-items:center;align-items:center}.w-100[_ngcontent-%COMP%]{width:100%}.h-100[_ngcontent-%COMP%]{height:100%}.query-options[_ngcontent-%COMP%]{margin:10px auto;display:grid;grid-template-columns:200px 100px 100px 200px 100px 100px;grid-template-rows:30px;gap:20px;justify-content:flex-end}.filter-input[_ngcontent-%COMP%]{height:100%;width:100%;border-radius:5px;font-size:16px;padding:2px 5px}.btn[_ngcontent-%COMP%]{border-radius:5px;cursor:pointer}']}),n})(),canActivate:[O.a,J]},{path:":boardId",component:at,canActivate:[O.a,H]}];let Zt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[f.Bz.forChild(wt),f.Bz]}),n})(),Ft=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[f.Bz,Zt,E.m]}),n})()}}]);